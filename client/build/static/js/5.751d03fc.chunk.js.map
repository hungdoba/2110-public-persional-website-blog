{"version":3,"sources":["pages/Post/element.js","pages/Post/Post.js"],"names":["Container","styled","div","Title","TitleText","h2","ModifyButton","button","show","DeleteButton","Content","PostList","Image","Img","img","Paragraph","Post","useState","diaryPosts","setDiaryPost","programmingPosts","setProgrammingPost","bookPosts","setBookPost","showDeleteBtn","setShowDeleteBtn","user","useContext","Context","path","useLocation","pathname","split","article","setArticle","language","setLanguage","skyPhoto","photoSrc","setPhotoSrc","useEffect","localStorage","getItem","setItem","getArticle","a","axios","get","res","data","titleImage","getDiaryPost","getProgrammingPost","getBookPost","Navbar","languageChanged","onClick","deletePost","delete","then","window","location","replace","catch","err","console","log","titleEn","titleVi","titleJa","alt","src","onError","dangerouslySetInnerHTML","__html","contentEn","contentVi","contentJa","Category","title","link","length","slice","map","post","SearchResultUnit","_id","Footer"],"mappings":"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","file":"static/js/5.751d03fc.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n    width: 61.8vw;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    overflow: hidden;\r\n\r\n    @media screen and (max-width: 1025px) {\r\n        width: 90%;\r\n    }\r\n\r\n    @media screen and (max-width: 767px) {\r\n        width: 95%;\r\n    }\r\n`;\r\n\r\nexport const Title = styled.div`\r\n    width: 100%;\r\n    padding: 10px 0;\r\n    display: flex;\r\n    flex-direction: row-reverse;\r\n    margin-bottom: 5px;\r\n    border-bottom: 1px solid green;\r\n`;\r\n\r\nexport const TitleText = styled.h2`\r\n    color: darkgreen;\r\n    margin-right: auto;\r\n    @media screen and (max-width: 767px) {\r\n        font-size: 16px;\r\n    }\r\n`;\r\n\r\nexport const ModifyButton = styled.button`\r\n    display: ${({ show }) => (show ? \"block\" : \"none\")};\r\n    border: none;\r\n    padding: 5px 20px;\r\n    border-radius: 5px;\r\n    background-color: lightgreen;\r\n    margin-right: 1vw;\r\n\r\n    &:hover {\r\n        color: white;\r\n        cursor: pointer;\r\n        background-color: green;\r\n    }\r\n`;\r\n\r\nexport const DeleteButton = styled.button`\r\n    display: ${({ show }) => (show ? \"block\" : \"none\")};\r\n    border: none;\r\n    padding: 5px 20px;\r\n    border-radius: 5px;\r\n    background-color: orange;\r\n\r\n    &:hover {\r\n        color: white;\r\n        cursor: pointer;\r\n        background-color: red;\r\n    }\r\n`;\r\n\r\nexport const Content = styled.div`\r\n    width: 100%;\r\n    margin-bottom: 10px;\r\n    border-bottom: 1px solid green;\r\n`;\r\n\r\nexport const PostList = styled.div`\r\n    width: 100%;\r\n    margin-bottom: 10px;\r\n    padding-bottom: 10px;\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n`;\r\n\r\nexport const CategoryList = styled.div`\r\n    width: 100%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n`;\r\n\r\nexport const Image = styled.div`\r\n    width: 100%;\r\n    height: 40vh;\r\n    overflow: hidden;\r\n    margin-bottom: 10px;\r\n\r\n    @media screen and (max-width: 1025px) {\r\n        height: 30vw;\r\n    }\r\n\r\n    @media screen and (max-width: 767px) {\r\n        height: 50vw;\r\n    }\r\n`;\r\n\r\nexport const Img = styled.img`\r\n    width: 100%;\r\n    object-fit: cover;\r\n`;\r\n\r\nexport const Paragraph = styled.div`\r\n    width: 100%;\r\n    padding-bottom: 10px;\r\n    overflow: auto;\r\n`;\r\n","import axios from \"axios\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\n\r\nimport { Context } from \"../../context/Context\";\r\n\r\nimport Footer from \"../../components/Footer\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport Category from \"../../components/Category\";\r\nimport SearchResultUnit from \"../../components/SearchResultUnit\";\r\nimport {\r\n    Container,\r\n    Content,\r\n    DeleteButton,\r\n    Image,\r\n    Img,\r\n    ModifyButton,\r\n    Paragraph,\r\n    PostList,\r\n    Title,\r\n    TitleText,\r\n} from \"./element\";\r\n\r\nimport skyPhoto from \"../../images/sky.jpg\";\r\n\r\nconst Post = () => {\r\n    const [diaryPosts, setDiaryPost] = useState({});\r\n    const [programmingPosts, setProgrammingPost] = useState({});\r\n    const [bookPosts, setBookPost] = useState({});\r\n    const [showDeleteBtn, setShowDeleteBtn] = useState(false);\r\n    const { user } = useContext(Context);\r\n\r\n    const location = useLocation();\r\n    const path = location.pathname.split(\"/\")[2];\r\n    const [article, setArticle] = useState({});\r\n\r\n    const [language, setLanguage] = useState(\"en\");\r\n    const [photoSrc, setPhotoSrc] = useState(skyPhoto);\r\n\r\n    useEffect(() => {\r\n        const language = localStorage.getItem(\"lang\");\r\n        language ? setLanguage(language) : localStorage.setItem(\"lang\", \"en\");\r\n\r\n        const getArticle = async () => {\r\n            const res = await axios.get(\"/posts/\" + path);\r\n            setArticle(res.data);\r\n        };\r\n        getArticle();\r\n    }, [path]);\r\n\r\n    useEffect(() => {\r\n        setPhotoSrc(\r\n            \"https://drive.google.com/uc?export=view&id=\" + article.titleImage\r\n        );\r\n    }, [article]);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            setShowDeleteBtn(true);\r\n        } else {\r\n            setShowDeleteBtn(false);\r\n        }\r\n    }, [user]);\r\n\r\n    const setDefaultImage = () => {\r\n        setPhotoSrc(skyPhoto);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const getDiaryPost = async () => {\r\n            const res = await axios.get(\"posts/?category=diary\");\r\n            setDiaryPost(res.data);\r\n        };\r\n\r\n        const getProgrammingPost = async () => {\r\n            const res = await axios.get(\"posts/?category=programming\");\r\n            setProgrammingPost(res.data);\r\n        };\r\n\r\n        const getBookPost = async () => {\r\n            const res = await axios.get(\"posts/?category=book\");\r\n            setBookPost(res.data);\r\n        };\r\n\r\n        getBookPost();\r\n        getDiaryPost();\r\n        getProgrammingPost();\r\n    }, []);\r\n\r\n    const DeletePost = () => {\r\n        if (user) {\r\n            const deletePost = async () => {\r\n                axios\r\n                    .delete(\"posts/\" + path)\r\n                    .then((res) => {\r\n                        window.location.replace(\"/\");\r\n                    })\r\n                    .catch((err) => console.log(err));\r\n            };\r\n            deletePost();\r\n        } else {\r\n            console.log(\"Login is require\");\r\n        }\r\n    };\r\n\r\n    const ModifyPost = () => {\r\n        if (user) {\r\n            window.location.replace(\"/#/article/\" + path);\r\n        } else {\r\n            console.log(\"Login is require\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Navbar languageChanged={setLanguage} />\r\n            <Container>\r\n                <Title>\r\n                    <DeleteButton onClick={DeletePost} show={showDeleteBtn}>\r\n                        Delete Post\r\n                    </DeleteButton>\r\n                    <ModifyButton onClick={ModifyPost} show={showDeleteBtn}>\r\n                        Modify Post\r\n                    </ModifyButton>\r\n                    <TitleText>\r\n                        {language === \"en\"\r\n                            ? article.titleEn\r\n                            : language === \"vi\"\r\n                            ? article.titleVi\r\n                            : article.titleJa}\r\n                    </TitleText>\r\n                </Title>\r\n                <Content>\r\n                    <Image>\r\n                        <Img\r\n                            alt=\"google-drive-photo\"\r\n                            src={photoSrc}\r\n                            onError={setDefaultImage}\r\n                        />\r\n                    </Image>\r\n                    <div\r\n                        dangerouslySetInnerHTML={{\r\n                            __html: `\r\n                    ${\r\n                        language === \"en\"\r\n                            ? article.contentEn\r\n                            : language === \"vi\"\r\n                            ? article.contentVi\r\n                            : article.contentJa\r\n                    }\r\n                            `,\r\n                        }}\r\n                    />\r\n                    <Paragraph></Paragraph>\r\n                </Content>\r\n                <PostList>\r\n                    <Category\r\n                        title={\r\n                            language === \"ja\"\r\n                                ? \"日記\"\r\n                                : language === \"vi\"\r\n                                ? \"Nhật ký\"\r\n                                : \"Diary\"\r\n                        }\r\n                        link=\"/temp\"\r\n                    />\r\n                    {diaryPosts.length &&\r\n                        diaryPosts\r\n                            .slice(0, 2)\r\n                            .map((post) => (\r\n                                <SearchResultUnit\r\n                                    language={language}\r\n                                    post={post}\r\n                                    key={post._id}\r\n                                />\r\n                            ))}\r\n                </PostList>\r\n                <PostList>\r\n                    <Category\r\n                        title={\r\n                            language === \"ja\"\r\n                                ? \"本\"\r\n                                : language === \"vi\"\r\n                                ? \"Sách\"\r\n                                : \"Book\"\r\n                        }\r\n                        link=\"/temp\"\r\n                    />\r\n                    {bookPosts.length &&\r\n                        bookPosts\r\n                            .slice(0, 2)\r\n                            .map((post) => (\r\n                                <SearchResultUnit\r\n                                    language={language}\r\n                                    post={post}\r\n                                    key={post._id}\r\n                                />\r\n                            ))}\r\n                </PostList>\r\n                <PostList>\r\n                    <Category\r\n                        title={\r\n                            language === \"ja\"\r\n                                ? \"プログラミング\"\r\n                                : language === \"vi\"\r\n                                ? \"Lập trình\"\r\n                                : \"Programming\"\r\n                        }\r\n                        link=\"/temp\"\r\n                    />\r\n                    {programmingPosts.length &&\r\n                        programmingPosts\r\n                            .slice(0, 2)\r\n                            .map((post) => (\r\n                                <SearchResultUnit\r\n                                    language={language}\r\n                                    post={post}\r\n                                    key={post._id}\r\n                                />\r\n                            ))}\r\n                </PostList>\r\n            </Container>\r\n            <Footer language={language} />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Post;\r\n"],"sourceRoot":""}